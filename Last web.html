<!DOCTYPE html>
<html>
<head>
  <title>Delhi-NCR Clean Air Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDf6CzXD6SRUKJJFwYTAnifcD6wFBRrhZQ&libraries=visualization"></script>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f4f6f8; }
    nav { background:#1a2a6c; color:white; padding:15px; display:flex; justify-content:space-between; }
    nav .menu a { color:white; margin:0 10px; text-decoration:none; }
    nav .menu a:hover { text-decoration:underline; }
    header { background:#1a2a6c; color:white; padding:20px; text-align:center; }
    .metrics { display:flex; justify-content:space-around; margin:20px; flex-wrap:wrap; }
    .card { background:white; padding:20px; border-radius:12px; width:22%; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.1); margin-bottom:20px; }
    .section { background:white; margin:20px; padding:20px; border-radius:12px; box-shadow:0 3px 8px rgba(0,0,0,0.05); }
    #map { width:100%; height:400px; border-radius:12px; margin-bottom:15px; }
    canvas { width:100%; height:350px; }
    #alerts { max-height:200px; overflow-y:auto; border:1px solid #f5c542; background:#fff3cd; padding:10px; border-radius:10px; }
    .alert-item { margin-bottom:8px; padding:5px; background:#ffeeba; border-radius:5px; }
    footer { background:#1a2a6c; color:white; padding:15px; text-align:center; margin-top:20px; }
    a { color:#1a2a6c; text-decoration:none; }
    a:hover { text-decoration:underline; }
  </style>
</head>
<body>

<nav>
  <div>üåø Clean Air Dashboard</div>
  <div class="menu">
    <a href="#">Home</a>
    <a href="#">Report Issue</a>
    <a href="#">Emergency</a>
    <a href="#">Contact</a>
    <a href="#">Settings</a>
    <a href="#">Notifications</a>
  </div>
</nav>

<header>
  <h1>Delhi-NCR Real-Time Pollution Monitoring</h1>
  <p>Smart India Hackathon 2025 | TEAM PRANA</p>
</header>

<div class="metrics">
  <div class="card" style="background:#ffcccc;">
    <h3>Current AQI</h3>
    <p>312 ‚Äì Hazardous</p>
  </div>
  <div class="card" style="background:#ffe4b5;">
    <h3>Worst Area Today</h3>
    <p>Okhla</p>
  </div>
  <div class="card" style="background:#d4f1f4;">
    <h3>Tomorrow‚Äôs Forecast</h3>
    <p>280 ‚Äì Very Poor</p>
  </div>
  <div class="card" style="background:#c8facc;">
    <h3>Alerts Sent</h3>
    <p>12</p>
  </div>
</div>

<div class="section">
  <h2>üìç Pollution Hotspots Heatmap & Wind Direction</h2>
  <div id="map"></div>
</div>

<div class="section">
  <h2>üìä Hourly AQI</h2>
  <canvas id="aqiChart"></canvas>
</div>

<div class="section">
  <h2>‚ö† Live Alerts</h2>
  <div id="alerts"></div>
</div>

<div class="section">
  <h2>üìö References</h2>
  <ul>
    <li><a href="https://aqicn.org/city/delhi/" target="_blank">AQI Data ‚Äì aqicn.org</a></li>
    <li><a href="https://www.google.com/maps" target="_blank">Google Maps API Documentation</a></li>
    <li><a href="https://www.epa.gov/air-trends" target="_blank">EPA Air Trends</a></li>
    <li><a href="https://data.gov.in/" target="_blank">Open Government Data Portal (India)</a></li>
  </ul>
</div>

<footer>
  üöÄ Smart India Hackathon 2025 | TEAM PRANA | Contact: info@prana.in
</footer>

<script>
  // ------------------ Google Maps Heatmap & Wind Arrows ------------------
  function initMap() {
    var delhiCenter = {lat:28.6437, lng:77.2090};
    var map = new google.maps.Map(document.getElementById('map'), { zoom:11, center:delhiCenter });
    
    var hotspots = [
      {lat:28.5450, lng:77.2630, aqi:312, wind:"NE"},
      {lat:28.6100, lng:77.2300, aqi:280, wind:"E"},
      {lat:28.6700, lng:77.1200, aqi:250, wind:"SE"},
      {lat:28.7000, lng:77.2100, aqi:180, wind:"N"}
    ];
    
    var heatData = hotspots.map(h => new google.maps.LatLng(h.lat,h.lng));
    new google.maps.visualization.HeatmapLayer({data:heatData, radius:50}).setMap(map);
    
    hotspots.forEach(h=>{
      new google.maps.Marker({
        position:{lat:h.lat,lng:h.lng},
        map:map,
        icon:{
          path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
          scale:6,
          rotation: windToDegree(h.wind),
          fillColor:'blue',
          fillOpacity:0.8,
          strokeWeight:1
        },
        title:`AQI: ${h.aqi} | Wind: ${h.wind}`
      });
    });
    
    function windToDegree(dir){
      switch(dir){
        case "N": return 0; case "NE": return 45; case "E": return 90;
        case "SE": return 135; case "S": return 180; case "SW": return 225;
        case "W": return 270; case "NW": return 315; default: return 0;
      }
    }
  }
  window.onload = initMap;

  // ------------------ Hourly AQI ------------------
  new Chart(document.getElementById('aqiChart').getContext('2d'), {
    type:'bar',
    data:{
      labels:['6AM','8AM','10AM','12PM','2PM','4PM','6PM','8PM','10PM'],
      datasets:[{
        label:'AQI',
        data:[180,200,250,300,280,260,310,290,220],
        backgroundColor:function(ctx){
          const val = ctx.dataset.data[ctx.dataIndex];
          if(val>300) return 'red'; else if(val>200) return 'orange';
          else if(val>150) return 'yellow'; else return 'green';
        },
        borderColor:'#333', borderWidth:1
      }]
    },
    options:{ responsive:true, plugins:{legend:{display:false}} }
  });

  // ------------------ Live Alerts ------------------
  const alertsContainer = document.getElementById('alerts');
  const alertsData = [
    "Dwarka: AQI spike expected (PM2.5: 350). Stay indoors & wear masks.",
    "Okhla: Industrial emissions high today; minimize outdoor exposure.",
    "Punjabi Region: Crop burning smoke drifting into Delhi.",
    "Rohini: Traffic-related pollution increasing rapidly.",
    "Anand Vihar: AQI above 280; sensitive groups advised to stay indoors."
  ];

  let alertIndex = 0;
  function showAlerts() {
    alertsContainer.innerHTML = "";
    alertsContainer.innerHTML = `<div class="alert-item">${alertsData[alertIndex]}</div>`;
    alertIndex = (alertIndex + 1) % alertsData.length;
  }
  showAlerts();
  setInterval(showAlerts, 4000); // change alert every 4 seconds
</script>

</body>
</html>
